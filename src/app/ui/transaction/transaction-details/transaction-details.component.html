<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button
        (click)="navigateAway.emit()"
        [defaultHref]="AppRoutingPath.TAB_3_TRANSACTIONS.toString()"
      ></ion-back-button>
    </ion-buttons>
    <ion-title>Transaction Details</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="presentActionSheet()">
        <ion-icon slot="icon-only" name="ellipsis-vertical"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="hero-section ion-padding-vertical">
    <div
      class="amount-display"
      [class.income]="isIncome()"
      [class.expense]="!isIncome()"
    >
      {{ transaction().amount | currency }}
    </div>
    <div class="date-display ion-text-muted">
      <ion-icon
        name="calendar-outline"
        style="vertical-align: text-bottom;"
      ></ion-icon>
      {{ transaction().dateCreated | date: 'fullDate' }}
    </div>
    @if (transaction().revised) {
      <ion-badge color="warning" class="ion-margin-top">Revised</ion-badge>
    }
  </div>

  <ion-card class="ion-margin-horizontal ion-margin-bottom">
    <ion-list lines="none">
      <ion-item>
        <ion-icon
          slot="start"
          name="folder-open-outline"
          color="primary"
        ></ion-icon>
        <ion-label>
          <h3>Category</h3>
          <p>{{ transaction().category.categoryName }}</p></ion-label
        >
      </ion-item>

      <ion-item>
        <ion-icon
          slot="start"
          name="wallet-outline"
          color="tertiary"
        ></ion-icon>
        <ion-label>
          <h3>Budget</h3>
          <p>{{ budget().budgetName }}</p>
        </ion-label>
      </ion-item>

      <ion-item>
        <ion-avatar slot="start" class="small-avatar">
          <img
            [src]="
                  'https://ui-avatars.com/api/?name=' +
                  transaction().user.username
                "
            alt="avatar"
          />
        </ion-avatar>
        <ion-label>
          <h3>Created By</h3>
          <p>{{ transaction().user.username }}</p>
        </ion-label>
      </ion-item>
    </ion-list>
  </ion-card>

  @if (transaction().tags.length > 0) {
    <div class="ion-padding-horizontal ion-margin-top">
      <ion-label color="medium" class="section-label">
        <ion-icon name="pricetag-outline"></ion-icon>
        Tags
      </ion-label>
      <div class="tags-container">
        @for (tag of transaction().tags; track tag.id) {
          <ion-chip>
            <ion-label>{{ tag.tagName }}</ion-label>
          </ion-chip>
        }
      </div>
    </div>
  }

  @if (transaction().comment) {
    <ion-card class="ion-margin">
      <ion-card-content>
        <div class="comment-header">
          <ion-icon name="chatbox-outline" color="medium"></ion-icon>
          <span>Note</span>
        </div>
        <ion-text color="dark">
          <p class="comment-text">{{ transaction().comment }}</p>
        </ion-text>
      </ion-card-content>
    </ion-card>
  }
</ion-content>

